\documentclass{standalone}

\usepackage{collectbox}

\newcommand*{\mybox}{%
    \collectboxcheckenv{mybox}%
    \collectbox*\fbox
}

\fboxsep=0pt

\begin{document}

\mybox{Text \verb+\relax!+}
\mybox{}
\mybox{ }
\begin{mybox}
\end{mybox}
\begin{mybox} a
    Env
    \mybox{ Macro sp \verb+\relax!+ }
    it
    \mybox{ Macro \verb+\relax!+ 
    \begin{mybox}
        Env
        \mybox{ Text \verb+\relax!+ }
        it
        \mybox{ Text \verb+\relax!+ 
        }
        EnvEnd
    \end{mybox}
        AfterEnv
    }
    EndOuterEnv
\end{mybox}
\end{document}


